[pytest]
# Pytest configuration for confluence-bidir-sync

# Test markers
markers =
    integration: Integration tests (filesystem only, no external API)
    e2e: End-to-end tests with real Confluence API (slow, requires settling time)
    slow: Slow tests that take a long time to run
    unit: Unit tests with no external dependencies
    adf: Tests for ADF surgical update functionality
    conflict: Tests for conflict resolution
    macro: Tests for macro preservation
    linebreak: Tests for line break conversion

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*
testpaths = tests

# Output options
# Skip E2E tests by default (they're slow with API settling time)
# To run E2E tests: pytest -m e2e
addopts = -v --strict-markers -m "not e2e"

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Coverage configuration
[coverage:run]
source = src
branch = True
omit =
    tests/*
    */__pycache__/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
fail_under = 95
show_missing = True
